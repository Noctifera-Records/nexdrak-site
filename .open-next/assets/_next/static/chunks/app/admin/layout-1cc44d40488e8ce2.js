(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{4365:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var l=a(5155),t=a(2115),n=a(8525),i=a(2619),r=a.n(i),c=a(63),d=a(6485),h=a(9867),o=a(5993),x=a(9540),m=a(3586),f=a(5870),g=a(952),b=a(508),u=a(1169),j=a(5229),w=a(2740),N=a(7003);function v(e){let{children:s}=e,[a,i]=(0,t.useState)(null),[v,y]=(0,t.useState)(null),[p,A]=(0,t.useState)(!0),[k,C]=(0,t.useState)(!1),_=(0,c.usePathname)(),E=(0,n.createClient)();(0,t.useEffect)(()=>{(async()=>{let{data:{user:e}}=await E.auth.getUser();if(!e){window.location.href="/login";return}let{data:s}=await E.from("profiles").select("role").eq("id",e.id).single();if((null==s?void 0:s.role)!=="admin"){window.location.href="/";return}i(e),y(s),A(!1)})()},[]);let S=[{href:"/admin",icon:o.A,label:"Dashboard"},{href:"/admin/users",icon:u.A,label:"Users"},{href:"/admin/music",icon:m.A,label:"Music"},{href:"/admin/merch",icon:g.A,label:"Merchandise"},{href:"/admin/downloads",icon:h.A,label:"Downloads"},{href:"/admin/events",icon:d.A,label:"Events"},{href:"/admin/settings",icon:f.A,label:"Settings"},{href:"/admin/account",icon:b.A,label:"Account"}],z=()=>C(!1);return p?(0,l.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,l.jsx)("div",{className:"text-white",children:"Loading..."})}):(0,l.jsxs)("div",{className:"flex min-h-screen bg-gray-900",children:[k&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:z}),(0,l.jsxs)("aside",{className:"\n        fixed lg:static inset-y-0 left-0 z-50\n        w-64 bg-gray-900 border-r border-gray-700 text-white flex flex-col\n        transform transition-transform duration-300 ease-in-out\n        ".concat(k?"translate-x-0":"-translate-x-full lg:translate-x-0","\n      "),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[(0,l.jsx)("h2",{className:"text-xl font-bold",children:"Admin Panel"}),(0,l.jsx)(N.$,{variant:"ghost",size:"sm",onClick:z,className:"lg:hidden text-white hover:bg-gray-800",children:(0,l.jsx)(j.A,{className:"h-5 w-5"})})]}),(0,l.jsx)("nav",{className:"flex-1 p-4 space-y-1",children:S.map(e=>{let s=_===e.href;return(0,l.jsxs)(r(),{href:e.href,onClick:z,className:"\n                  flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors\n                  ".concat(s?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white","\n                "),children:[(0,l.jsx)(e.icon,{className:"h-5 w-5"}),(0,l.jsx)("span",{children:e.label})]},e.href)})}),(0,l.jsxs)("div",{className:"border-t border-gray-700 p-4 space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3 px-2",children:[(0,l.jsx)("div",{className:"bg-gray-700 rounded-full p-2 flex-shrink-0",children:(0,l.jsx)(b.A,{className:"h-4 w-4"})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-white truncate",children:null==a?void 0:a.email}),(0,l.jsx)("p",{className:"text-xs text-gray-400",children:"Admin"})]})]}),(0,l.jsx)(w.A,{className:"w-full justify-start hover:bg-gray-800 text-white",variant:"ghost"})]})]}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,l.jsx)("header",{className:"lg:hidden bg-gray-800 border-b border-gray-700 p-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(N.$,{variant:"ghost",size:"sm",onClick:()=>C(!0),className:"text-white hover:bg-gray-700",children:(0,l.jsx)(x.A,{className:"h-5 w-5"})}),(0,l.jsx)("h1",{className:"text-lg font-semibold text-white",children:"Admin Panel"}),(0,l.jsx)("div",{className:"w-10"})," "]})}),(0,l.jsx)("main",{className:"flex-1 bg-gray-800 text-white overflow-auto",children:(0,l.jsx)("div",{className:"p-4 lg:p-8",children:s})})]})]})}},8923:(e,s,a)=>{Promise.resolve().then(a.bind(a,4365))}},e=>{e.O(0,[96,76,358],()=>e(e.s=8923)),_N_E=e.O()}]);