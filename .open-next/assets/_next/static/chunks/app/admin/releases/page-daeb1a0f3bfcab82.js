(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[673],{1249:(e,a,r)=>{Promise.resolve().then(r.bind(r,7458))},7458:(e,a,r)=>{"use strict";r.d(a,{default:()=>N});var s=r(5155),t=r(2115),l=r(7003),i=r(6170),n=r(235),c=r(6485),d=r(1010),m=r(5880),o=r(3586),h=r(6191),x=r(6651),g=r(1360),u=r(4679),j=r(8525),v=r(63),y=r(6014);function N(e){let{releases:a}=e,[r,n]=(0,t.useState)(a),[y,N]=(0,t.useState)(""),[f,p]=(0,t.useState)(null),[w,z]=(0,t.useState)(!1),[_,C]=(0,t.useState)(!1),E=(0,j.createClient)(),S=(0,v.useRouter)(),A=r.filter(e=>e.title.toLowerCase().includes(y.toLowerCase())),L=async e=>{z(!0);try{let{data:a,error:s}=await E.from("releases").insert([e]).select().single();if(s)throw s;n([a,...r]),C(!1),S.refresh()}catch(e){alert("Error al agregar lanzamiento")}finally{z(!1)}},k=async(e,a)=>{z(!0);try{let{error:s}=await E.from("releases").update(a).eq("id",e);if(s)throw s;n(r.map(r=>r.id===e?{...r,...a}:r)),p(null),S.refresh()}catch(e){alert("Error al actualizar lanzamiento")}finally{z(!1)}},q=async e=>{z(!0);try{let{error:a}=await E.from("releases").delete().eq("id",e);if(a)throw a;n(r.filter(a=>a.id!==e)),S.refresh()}catch(e){alert("Error al eliminar lanzamiento")}finally{z(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)(i.p,{placeholder:"Buscar lanzamientos...",value:y,onChange:e=>N(e.target.value),className:"pl-10 bg-gray-900 border-gray-700 text-white"})]}),(0,s.jsxs)(u.lG,{open:_,onOpenChange:C,children:[(0,s.jsx)(u.zM,{asChild:!0,children:(0,s.jsxs)(l.$,{className:"bg-white text-black hover:bg-gray-200",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Agregar Lanzamiento"]})}),(0,s.jsxs)(u.Cf,{className:"bg-gray-900 border-gray-700",children:[(0,s.jsxs)(u.c7,{children:[(0,s.jsx)(u.L3,{className:"text-white",children:"Nuevo Lanzamiento"}),(0,s.jsx)(u.rr,{className:"text-gray-400",children:"Agrega un nuevo lanzamiento musical"})]}),(0,s.jsx)(b,{onSave:L,loading:w})]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map(e=>(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-700 overflow-hidden",children:[(0,s.jsx)("div",{className:"aspect-square bg-gray-800 flex items-center justify-center",children:e.cover_image_url?(0,s.jsx)("img",{src:e.cover_image_url,alt:e.title,className:"w-full h-full object-cover"}):(0,s.jsx)(o.A,{className:"h-16 w-16 text-gray-600"})}),(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white truncate",children:e.title}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-400 mt-1",children:[(0,s.jsx)(c.A,{className:"h-3 w-3 mr-1"}),new Date(e.release_date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]})]}),e.stream_url&&(0,s.jsxs)("a",{href:e.stream_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-blue-400 hover:text-blue-300",children:[(0,s.jsx)(m.A,{className:"h-3 w-3 mr-1"}),"Escuchar"]}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2 pt-2 border-t border-gray-700",children:[(0,s.jsxs)(u.lG,{children:[(0,s.jsx)(u.zM,{asChild:!0,children:(0,s.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>p(e),children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(u.Cf,{className:"bg-gray-900 border-gray-700",children:[(0,s.jsxs)(u.c7,{children:[(0,s.jsx)(u.L3,{className:"text-white",children:"Editar Lanzamiento"}),(0,s.jsx)(u.rr,{className:"text-gray-400",children:"Modifica la informaci\xf3n del lanzamiento"})]}),f&&(0,s.jsx)(b,{release:f,onSave:e=>k(f.id,e),loading:w})]})]}),(0,s.jsxs)(u.lG,{children:[(0,s.jsx)(u.zM,{asChild:!0,children:(0,s.jsx)(l.$,{variant:"ghost",size:"sm",className:"text-red-400 hover:text-red-300 hover:bg-red-900/20",children:(0,s.jsx)(g.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(u.Cf,{className:"bg-gray-900 border-gray-700",children:[(0,s.jsxs)(u.c7,{children:[(0,s.jsx)(u.L3,{className:"text-white",children:"Eliminar Lanzamiento"}),(0,s.jsxs)(u.rr,{className:"text-gray-400",children:['\xbfEst\xe1s seguro de que quieres eliminar "',e.title,'"? Esta acci\xf3n no se puede deshacer.']})]}),(0,s.jsxs)(u.Es,{children:[(0,s.jsx)(l.$,{variant:"outline",className:"border-gray-600 text-gray-300",children:"Cancelar"}),(0,s.jsx)(l.$,{variant:"destructive",onClick:()=>q(e.id),disabled:w,children:w?"Eliminando...":"Eliminar"})]})]})]})]})]})]},e.id))}),0===A.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(o.A,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-400 text-lg mb-2",children:y?"No se encontraron lanzamientos":"No hay lanzamientos"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:!y&&"Agrega tu primer lanzamiento para comenzar"})]})]})}function b(e){let{release:a,onSave:r,loading:c}=e,[d,m]=(0,t.useState)((null==a?void 0:a.title)||""),[o,h]=(0,t.useState)((null==a?void 0:a.release_date)?a.release_date.split("T")[0]:""),[x,g]=(0,t.useState)((null==a?void 0:a.cover_image_url)||""),[j,v]=(0,t.useState)((null==a?void 0:a.stream_url)||"");return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r({title:d,release_date:o,cover_image_url:x||null,stream_url:j||null})},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.J,{htmlFor:"title",className:"text-white",children:"T\xedtulo *"}),(0,s.jsx)(i.p,{id:"title",value:d,onChange:e=>m(e.target.value),className:"bg-gray-800 border-gray-600 text-white",placeholder:"Nombre del lanzamiento",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(n.J,{htmlFor:"releaseDate",className:"text-white",children:"Fecha de Lanzamiento *"}),(0,s.jsx)(i.p,{id:"releaseDate",type:"date",value:o,onChange:e=>h(e.target.value),className:"bg-gray-800 border-gray-600 text-white",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(n.J,{htmlFor:"coverImageUrl",className:"text-white",children:"Imagen de Portada"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.A,{value:x,onChange:g,label:"",maxSize:2}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"O ingresa una URL directamente:"}),(0,s.jsx)(i.p,{id:"coverImageUrl",value:x,onChange:e=>g(e.target.value),className:"bg-gray-800 border-gray-600 text-white",placeholder:"https://ejemplo.com/imagen.jpg"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(n.J,{htmlFor:"streamUrl",className:"text-white",children:"URL de Streaming"}),(0,s.jsx)(i.p,{id:"streamUrl",value:j,onChange:e=>v(e.target.value),className:"bg-gray-800 border-gray-600 text-white",placeholder:"https://spotify.com/track/..."})]}),(0,s.jsx)(u.Es,{children:(0,s.jsx)(l.$,{type:"submit",disabled:c||!d||!o,className:"bg-white text-black hover:bg-gray-200",children:c?"Guardando...":a?"Actualizar":"Crear"})})]})}}},e=>{e.O(0,[96,76,358],()=>e(e.s=1249)),_N_E=e.O()}]);