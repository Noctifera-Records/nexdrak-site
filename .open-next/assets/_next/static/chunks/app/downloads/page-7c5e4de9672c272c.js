(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[284],{7550:(e,a,s)=>{"use strict";s.d(a,{default:()=>f});var l=s(5155),r=s(2115),t=s(5239),c=s(7003),i=s(3209),d=s(7812),n=s(9867),o=s(3581),x=s(2196),m=s(3586),g=s(6617),h=s(6651),u=s(9347),p=s(6170),b=s(3550),j=s(8525),w=s(1195);function f(e){let{downloads:a}=e,[s,t]=(0,r.useState)(a),[c,i]=(0,r.useState)(""),[d,n]=(0,r.useState)("all"),[f,N]=(0,r.useState)(null),v=(0,j.createClient)(),{showNotification:_}=(0,w.E)(),C=s.filter(e=>{var a;let s=e.title.toLowerCase().includes(c.toLowerCase())||(null==(a=e.description)?void 0:a.toLowerCase().includes(c.toLowerCase())),l="all"===d||e.category===d;return s&&l}),D=C.filter(e=>e.is_featured),k=C.filter(e=>!e.is_featured),A=async e=>{N(e.id);try{await v.from("downloads").update({download_count:e.download_count+1}).eq("id",e.id),t(s.map(a=>a.id===e.id?{...a,download_count:a.download_count+1}:a)),_({type:"success",title:"Descarga iniciada",message:'Descargando "'.concat(e.title,'"')}),window.open(e.file_url,"_blank")}catch(a){_({type:"error",title:"Error en la descarga",message:"No se pudo procesar la descarga correctamente"}),window.open(e.file_url,"_blank")}finally{N(null)}},E=e=>{switch(e){case"wallpaper":return(0,l.jsx)(x.A,{className:"h-4 w-4"});case"mp3":return(0,l.jsx)(m.A,{className:"h-4 w-4"});default:return(0,l.jsx)(g.A,{className:"h-4 w-4"})}},L=e=>{switch(e){case"wallpaper":return"Wallpaper";case"mp3":return"Audio";default:return"Otros"}},S=e=>{switch(e){case"wallpaper":return"bg-blue-900/30 text-blue-300 border-blue-500/30";case"mp3":return"bg-purple-900/30 text-purple-300 border-purple-500/30";default:return"bg-gray-900/30 text-gray-300 border-gray-500/30"}},O=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"});return(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,l.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,l.jsx)(h.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,l.jsx)(p.p,{placeholder:"Buscar descargas...",value:c,onChange:e=>i(e.target.value),className:"pl-10 bg-gray-900 border-gray-700 text-white"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(o.A,{className:"h-4 w-4 text-gray-400"}),(0,l.jsxs)(b.l6,{value:d,onValueChange:n,children:[(0,l.jsx)(b.bq,{className:"w-40 bg-gray-900 border-gray-700 text-white",children:(0,l.jsx)(b.yv,{})}),(0,l.jsxs)(b.gC,{className:"bg-gray-900 border-gray-700",children:[(0,l.jsx)(b.eb,{value:"all",children:"Todas"}),(0,l.jsx)(b.eb,{value:"wallpaper",children:"Wallpapers"}),(0,l.jsx)(b.eb,{value:"mp3",children:"Audio"}),(0,l.jsx)(b.eb,{value:"other",children:"Otros"})]})]})]})]}),D.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,l.jsx)(u.A,{className:"h-5 w-5 text-yellow-400"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Destacados"})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:D.map(e=>(0,l.jsx)(y,{download:e,onDownload:A,downloading:f===e.id,getCategoryIcon:E,getCategoryLabel:L,getCategoryColor:S,formatDate:O,featured:!0},e.id))})]}),k.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Todas las Descargas"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(e=>(0,l.jsx)(y,{download:e,onDownload:A,downloading:f===e.id,getCategoryIcon:E,getCategoryLabel:L,getCategoryColor:S,formatDate:O},e.id))})]}),0===C.length&&(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(g.A,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-400 text-lg mb-2",children:c||"all"!==d?"No se encontraron descargas":"No hay descargas disponibles"}),(0,l.jsx)("p",{className:"text-gray-500 text-sm",children:!c&&"all"===d&&"Las descargas aparecer\xe1n aqu\xed cuando se agreguen"})]})]})}function y(e){let{download:a,onDownload:s,downloading:r,getCategoryIcon:o,getCategoryLabel:x,getCategoryColor:m,formatDate:g,featured:h=!1}=e;return(0,l.jsxs)(i.Zp,{className:"bg-gray-900 border-gray-700 overflow-hidden group hover:border-gray-600 transition-all ".concat(h?"ring-2 ring-yellow-500/30":""),children:[(0,l.jsxs)("div",{className:"relative aspect-video bg-gray-800",children:[a.thumbnail_url?(0,l.jsx)(t.default,{src:a.thumbnail_url,alt:a.title,fill:!0,className:"object-cover group-hover:scale-105 transition-transform"}):(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:o(a.category)}),(0,l.jsxs)("div",{className:"absolute top-2 left-2 flex space-x-2",children:[h&&(0,l.jsxs)(d.E,{className:"bg-yellow-500/20 text-yellow-300 border-yellow-500/30",children:[(0,l.jsx)(u.A,{className:"h-3 w-3 mr-1"}),"Destacado"]}),(0,l.jsxs)(d.E,{className:"".concat(m(a.category)," border"),children:[o(a.category),(0,l.jsx)("span",{className:"ml-1",children:x(a.category)})]})]}),(0,l.jsx)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,l.jsx)(c.$,{onClick:()=>s(a),disabled:r,className:"bg-white text-black hover:bg-gray-200",children:r?(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black mr-2"}),"Descargando..."]}):(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Descargar"]})})})]}),(0,l.jsxs)(i.Wu,{className:"p-4 space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-white group-hover:text-gray-200 transition-colors",children:a.title}),a.description&&(0,l.jsx)("p",{className:"text-sm text-gray-400 mt-1 line-clamp-2",children:a.description})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[a.file_size&&(0,l.jsx)("span",{children:a.file_size}),a.file_format&&(0,l.jsx)("span",{className:"bg-gray-800 px-2 py-1 rounded",children:a.file_format})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(n.A,{className:"h-3 w-3"}),(0,l.jsx)("span",{children:a.download_count})]})]}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:g(a.created_at)}),(0,l.jsx)(c.$,{onClick:()=>s(a),disabled:r,className:"w-full bg-white text-black hover:bg-gray-200",children:r?(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black mr-2"}),"Descargando..."]}):(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Descargar ",a.file_format]})})]})]})}},9806:(e,a,s)=>{Promise.resolve().then(s.bind(s,7550))}},e=>{e.O(0,[96,76,358],()=>e(e.s=9806)),_N_E=e.O()}]);