(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89],{6053:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>p});var t=a(5155),r=a(2115),n=a(63),c=a(8525),l=a(7003),i=a(6170),d=a(235),x=a(6132),o=a(2529),m=a(7828),u=a(532),h=a(9708);function p(){let[e,s]=(0,r.useState)(""),[a,p]=(0,r.useState)(""),[j,g]=(0,r.useState)(!1),[N,b]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1),[y,w]=(0,r.useState)(""),[C,A]=(0,r.useState)(""),[S,k]=(0,r.useState)(!1),_=(0,n.useRouter)(),z=(0,c.createClient)();(0,r.useEffect)(()=>{(async()=>{let{data:{session:e}}=await z.auth.getSession();e?k(!0):_.push("/login?message=Sesi\xf3n expirada. Solicita un nuevo enlace de restablecimiento.")})()},[_,z.auth]);let E=async s=>{if(s.preventDefault(),A(""),w(""),!e||!a)return void A("Por favor completa todos los campos");let t=e.length<8?"La contrase\xf1a debe tener al menos 8 caracteres":/(?=.*[a-z])/.test(e)?/(?=.*[A-Z])/.test(e)?/(?=.*\d)/.test(e)?null:"La contrase\xf1a debe contener al menos un n\xfamero":"La contrase\xf1a debe contener al menos una letra may\xfascula":"La contrase\xf1a debe contener al menos una letra min\xfascula";if(t)return void A(t);if(e!==a)return void A("Las contrase\xf1as no coinciden");v(!0);try{let{error:s}=await z.auth.updateUser({password:e});s?A(s.message):(w("\xa1Contrase\xf1a actualizada exitosamente!"),setTimeout(()=>{_.push("/login?message=sucess")},2e3))}catch(e){A("Error inesperado. Por favor intenta nuevamente.")}finally{v(!1)}};return S?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-black text-white px-4",children:(0,t.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(h.A,{className:"h-12 w-12 text-white"})}),(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Cambiar Contrase\xf1a"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Ingresa tu nueva contrase\xf1a segura"})]}),(0,t.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(d.J,{htmlFor:"password",className:"text-white",children:"Nueva Contrase\xf1a"}),(0,t.jsxs)("div",{className:"relative mt-1",children:[(0,t.jsx)(i.p,{id:"password",type:j?"text":"password",value:e,onChange:e=>s(e.target.value),className:"bg-gray-900 border-gray-700 text-white pr-10",placeholder:"Ingresa tu nueva contrase\xf1a",required:!0}),(0,t.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>g(!j),children:j?(0,t.jsx)(u.A,{className:"h-4 w-4 text-gray-400"}):(0,t.jsx)(m.A,{className:"h-4 w-4 text-gray-400"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.J,{htmlFor:"confirmPassword",className:"text-white",children:"Confirmar Contrase\xf1a"}),(0,t.jsxs)("div",{className:"relative mt-1",children:[(0,t.jsx)(i.p,{id:"confirmPassword",type:N?"text":"password",value:a,onChange:e=>p(e.target.value),className:"bg-gray-900 border-gray-700 text-white pr-10",placeholder:"Confirma tu nueva contrase\xf1a",required:!0}),(0,t.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>b(!N),children:N?(0,t.jsx)(u.A,{className:"h-4 w-4 text-gray-400"}):(0,t.jsx)(m.A,{className:"h-4 w-4 text-gray-400"})})]})]})]}),C&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-red-400 bg-red-900/20 p-3 rounded-md",children:[(0,t.jsx)(x.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm",children:C})]}),y&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-green-400 bg-green-900/20 p-3 rounded-md",children:[(0,t.jsx)(o.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm",children:y})]}),(0,t.jsx)(l.$,{type:"submit",disabled:f,className:"w-full bg-white text-black hover:bg-gray-200 disabled:opacity-50",children:f?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black"}),(0,t.jsx)("span",{children:"Actualizando..."})]}):"Actualizar Contrase\xf1a"})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 space-y-2",children:[(0,t.jsx)("p",{className:"font-medium",children:"Requisitos de la contrase\xf1a:"}),(0,t.jsxs)("ul",{className:"space-y-1",children:[(0,t.jsxs)("li",{className:"flex items-center space-x-2 ".concat(e.length>=8?"text-green-400":"text-gray-500"),children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:"M\xednimo 8 caracteres"})]}),(0,t.jsxs)("li",{className:"flex items-center space-x-2 ".concat(/(?=.*[a-z])/.test(e)?"text-green-400":"text-gray-500"),children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:"Al menos una letra min\xfascula"})]}),(0,t.jsxs)("li",{className:"flex items-center space-x-2 ".concat(/(?=.*[A-Z])/.test(e)?"text-green-400":"text-gray-500"),children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:"Al menos una letra may\xfascula"})]}),(0,t.jsxs)("li",{className:"flex items-center space-x-2 ".concat(/(?=.*\d)/.test(e)?"text-green-400":"text-gray-500"),children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:"Al menos un n\xfamero"})]})]})]})]})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-black text-white",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-4"}),(0,t.jsx)("p",{children:"Verificando sesi\xf3n..."})]})})}},9958:(e,s,a)=>{Promise.resolve().then(a.bind(a,6053))}},e=>{e.O(0,[96,76,358],()=>e(e.s=9958)),_N_E=e.O()}]);